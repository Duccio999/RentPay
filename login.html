<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Accesso Demo - RentPay</title>
  <meta name="description" content="Demo accesso con profili già registrati.">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- NAVBAR -->
<nav class="rp-nav">
  <a class="rp-brand" href="./index.html" aria-label="RentPay Home">
    <span class="rp-house" aria-hidden="true">🏠</span>
    <span class="rp-brand-text">RentPay</span>
  </a>
  <div class="rp-menu-desktop">
    <a href="./index.html">Home</a>
    <a href="./vision.html">Visione</a>
    <a href="./funzioni.html">Funzioni</a>
    <a href="./garanzia.html">Garanzia</a>
    <a href="./prezzi.html">Prezzi</a>
    <a href="./firma.html">Firma (demo)</a>
    <a class="rp-accent" href="./login.html" aria-current="page">Accedi</a>
  </div>
  <button id="rpHamburger" class="rp-hamburger" aria-label="Apri menu" aria-expanded="false">☰</button>
</nav>

<!-- Drawer mobile -->
<aside id="rpDrawer" class="rp-drawer" aria-hidden="true">
  <div class="rp-drawer-head">
    <span class="rp-drawer-title">Menù</span>
    <button id="rpDrawerClose" class="rp-close" aria-label="Chiudi menu">×</button>
  </div>
  <a href="./index.html">Home</a>
  <a href="./vision.html">Visione</a>
  <a href="./funzioni.html">Funzioni</a>
  <a href="./garanzia.html">Garanzia</a>
  <a href="./prezzi.html">Prezzi</a>
  <a href="./firma.html">Firma (demo)</a>
  <a class="rp-accent" href="./login.html" aria-current="page">Accedi</a>
</aside>
<div id="rpBackdrop" class="rp-backdrop" hidden></div>

<!-- CONTENUTO -->
<main class="container narrow">
  <section class="hero card">
    <h1>Accesso demo con profili registrati</h1>
    <p class="lead">Seleziona il ruolo e poi un profilo demo: i dati sono già compilati. Alla conferma entrerai nella tua pagina personale.</p>
  </section>

  <!-- Toggle ruolo -->
  <div class="role-toggle" style="display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 14px">
    <button class="pill active" id="btnProp">👤 Proprietario</button>
    <button class="pill" id="btnInq">🏡 Inquilino</button>
  </div>

  <!-- Scheda form -->
  <div class="form-card" id="cardForm" style="padding:16px">
    <div class="field">
      <label><strong>Seleziona profilo demo</strong></label>
      <div class="input">
        <span>📁</span>
        <select id="profileSel"></select>
      </div>
    </div>

    <div class="grid" style="margin-top:12px">
      <div class="field">
        <label>Nome e Cognome</label>
        <div class="input"><span>🧑</span><input id="name" placeholder="Nome Cognome" readonly></div>
      </div>
      <div class="field">
        <label>Email</label>
        <div class="input"><span>✉️</span><input id="email" placeholder="email@example.com" readonly></div>
      </div>
      <div class="field">
        <label id="lblExtra1">IBAN (accredito)</label>
        <div class="input"><span>🏦</span><input id="extra1" placeholder="IT.." readonly></div>
      </div>
      <div class="field">
        <label id="lblExtra2">Immobili gestiti</label>
        <div class="input"><span>🏢</span><input id="extra2" placeholder="1" readonly></div>
      </div>
    </div>

    <p class="notice" style="margin-top:12px;padding:10px 12px;border-radius:10px">
      <strong>DEMO:</strong> i dati sono statici e non vengono salvati.
    </p>

    <div class="actions" style="margin-top:10px">
      <button type="button" class="btn primary" id="btnLogin">Accedi</button>
    </div>
  </div>
</main>

<!-- FOOTER -->
<footer class="footer container">
  <div class="f-links">
    <a href="terms.html">Termini di servizio</a>
    <a href="privacy.html">Privacy Policy</a>
    <a href="cookie.html">Cookie Policy</a>
    <a href="vision.html">Visione</a>
    <a href="https://forms.gle/INSERISCI-LINK-FORM" target="_blank" rel="noopener">Questionario investitori</a>
  </div>
  <div class="copy">© 2025 RentPay — PWA</div>
</footer>

<!-- SCRIPT NAV (stesso di index) -->
<script type="text/javascript">
(function(){
  const btn=document.getElementById('rpHamburger'),
        drawer=document.getElementById('rpDrawer'),
        closeBtn=document.getElementById('rpDrawerClose'),
        backdrop=document.getElementById('rpBackdrop');

  function openD(){ drawer.classList.add('open'); backdrop.hidden=false; backdrop.classList.add('show'); document.body.style.overflow='hidden'; }
  function closeD(){ drawer.classList.remove('open'); backdrop.classList.remove('show'); backdrop.hidden=true; document.body.style.overflow=''; }

  btn && btn.addEventListener('click', openD);
  closeBtn && closeBtn.addEventListener('click', closeD);
  backdrop && backdrop.addEventListener('click', closeD);
  window.addEventListener('keydown', e => { if(e.key === 'Escape') closeD(); });
  drawer.querySelectorAll('a').forEach(a => a.addEventListener('click', closeD));
})();
</script>

<!-- SCRIPT LOGIN DEMO (unico e corretto) -->
<script>
const demo = {
  proprietario: [
    {name:'Sara Verdi',  email:'sara.verdi@rentpay.demo',  iban:'IT85U0300203280764839234567', units:1},
    {name:'Marco Neri',  email:'marco.neri@rentpay.demo',  iban:'IT60X0542811101000000123456', units:3}
  ],
  inquilino: [
    {name:'Luca Bianchi',  email:'luca.bianchi@rentpay.demo',  card:'Visa **** 4242',       rent:'€ 750/mese'},
    {name:'Giulia Neri',   email:'giulia.neri@rentpay.demo',   card:'Mastercard **** 9911', rent:'€ 720/mese'}
  ]
};

let ruolo = 'proprietario';
const sel    = document.getElementById('profileSel');
const nameEl = document.getElementById('name');
const mailEl = document.getElementById('email');
const ext1   = document.getElementById('extra1');
const ext2   = document.getElementById('extra2');
const lbl1   = document.getElementById('lblExtra1');
const lbl2   = document.getElementById('lblExtra2');

function fillOptions(){
  sel.innerHTML = '';
  demo[ruolo].forEach((p,i)=>{
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = `${p.name} — ${p.email}`;
    sel.appendChild(opt);
  });
  sel.selectedIndex = 0;
  applyProfile();
}

function applyProfile(){
  const p = demo[ruolo][sel.value||0];
  nameEl.value = p.name;
  mailEl.value = p.email;
  if(ruolo === 'proprietario'){
    lbl1.textContent = 'IBAN (accredito)';
    lbl2.textContent = 'Immobili gestiti';
    ext1.value = p.iban || '';
    ext2.value = p.units ?? '';
  }else{
    lbl1.textContent = 'Metodo pagamento';
    lbl2.textContent = 'Canone';
    ext1.value = p.card || '';
    ext2.value = p.rent || '';
  }
}

document.getElementById('btnProp').addEventListener('click', ()=>{
  document.getElementById('btnProp').classList.add('active');
  document.getElementById('btnInq').classList.remove('active');
  ruolo = 'proprietario';
  fillOptions();
});

document.getElementById('btnInq').addEventListener('click', ()=>{
  document.getElementById('btnInq').classList.add('active');
  document.getElementById('btnProp').classList.remove('active');
  ruolo = 'inquilino';
  fillOptions();
});

sel.addEventListener('change', applyProfile);

// CLICK ACCEDI → redirect alla dashboard giusta
document.getElementById('btnLogin').addEventListener('click', ()=>{
  const i = sel.value || 0;
  const target = (ruolo === 'proprietario') ? 'dashboard-prop.html' : 'dashboard-inq.html';
  window.location.href = `${target}?demo=${encodeURIComponent(ruolo)}&i=${i}`;
});

// init
fillOptions();
</script>
</body>
</html>
