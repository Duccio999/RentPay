<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Accesso Demo - RentPay</title>
  <meta name="description" content="Demo accesso con profili gi√† registrati.">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- NAVBAR -->
<nav class="rp-nav">
  <a class="rp-brand" href="./index.html" aria-label="RentPay Home">
    <span class="rp-house" aria-hidden="true">üè†</span>
    <span class="rp-brand-text">RentPay</span>
  </a>
  <div class="rp-menu-desktop">
    <a href="./index.html">Home</a>
    <a href="./vision.html">Visione</a>
    <a href="./funzioni.html">Funzioni</a>
    <a href="./garanzia.html">Garanzia</a>
    <a href="./prezzi.html">Prezzi</a>
    <a href="./firma.html">Firma (demo)</a>
    <a class="rp-accent" href="./login.html" aria-current="page">Accedi</a>
  </div>
  <button id="rpHamburger" class="rp-hamburger" aria-label="Apri menu" aria-expanded="false">‚ò∞</button>
</nav>

<aside id="rpDrawer" class="rp-drawer" aria-hidden="true">
  <div class="rp-drawer-head">
    <span class="rp-drawer-title">Men√π</span>
    <button id="rpDrawerClose" class="rp-close" aria-label="Chiudi menu">√ó</button>
  </div>
  <a href="./index.html">Home</a>
  <a href="./vision.html">Visione</a>
  <a href="./funzioni.html">Funzioni</a>
  <a href="./garanzia.html">Garanzia</a>
  <a href="./prezzi.html">Prezzi</a>
  <a href="./firma.html">Firma (demo)</a>
  <a class="rp-accent" href="./login.html" aria-current="page">Accedi</a>
</aside>
<div id="rpBackdrop" class="rp-backdrop" hidden></div>

<!-- CONTENUTO -->
<main class="container narrow">
  <section class="hero card">
    <h1>Accesso demo con profili registrati</h1>
    <p class="lead">Seleziona il ruolo e poi un profilo demo: i dati sono gi√† compilati. Alla conferma entrerai nella tua pagina personale.</p>
  </section>

  <!-- Toggle ruolo -->
  <div class="role-toggle">
    <button class="pill active" id="btnProp">üë§ Proprietario</button>
    <button class="pill" id="btnInq">üè° Inquilino</button>
  </div>

  <!-- Scheda form -->
  <div class="form-card" id="cardForm">
    <div class="field">
      <label><strong>Seleziona profilo demo</strong></label>
      <div class="input">
        <span>üìÅ</span>
        <select id="profileSel"></select>
      </div>
    </div>

    <div class="grid" style="margin-top:12px">
      <div class="field">
        <label>Nome e Cognome</label>
        <div class="input"><span>üßë</span><input id="name" placeholder="Nome Cognome"></div>
      </div>
      <div class="field">
        <label>Email</label>
        <div class="input"><span>‚úâÔ∏è</span><input id="email" placeholder="email@example.com"></div>
      </div>
      <div class="field">
        <label id="lblExtra1">IBAN (accredito)</label>
        <div class="input"><span>üè¶</span><input id="extra1" placeholder="IT.."></div>
      </div>
      <div class="field">
        <label id="lblExtra2">Immobili gestiti</label>
        <div class="input"><span>üè¢</span><input id="extra2" placeholder="1"></div>
      </div>
    </div>

    <p class="notice" style="margin-top:12px;padding:10px 12px;border-radius:10px">
      <strong>DEMO:</strong> i dati sono statici e non vengono salvati.
    </p>

    <div class="actions" style="margin-top:10px">
      <a class="btn primary" id="btnLogin">Accedi</a>
    </div>
  </div>
</main>

<!-- FOOTER -->
<footer class="footer container">
  <div class="f-links">
    <a href="terms.html">Termini di servizio</a>
    <a href="privacy.html">Privacy Policy</a>
    <a href="cookie.html">Cookie Policy</a>
    <a href="vision.html">Visione</a>
    <a href="https://forms.gle/INSERISCI-LINK-FORM" target="_blank" rel="noopener">Questionario investitori</a>
  </div>
  <div class="copy">¬© 2025 RentPay ‚Äî PWA</div>
</footer>

<!-- SCRIPT NAV -->
<script type="text/javascript" data-cookieconsent="ignore">
(function(){
  const btn=document.getElementById('rpHamburger'),
        drawer=document.getElementById('rpDrawer'),
        closeBtn=document.getElementById('rpDrawerClose'),
        backdrop=document.getElementById('rpBackdrop');
  function openD(){drawer.classList.add('open');backdrop.hidden=false;backdrop.classList.add('show');document.body.style.overflow='hidden'}
  function closeD(){drawer.classList.remove('open');backdrop.classList.remove('show');backdrop.hidden=true;document.body.style.overflow=''}
  btn&&btn.addEventListener('click',openD);
  closeBtn&&closeBtn.addEventListener('click',closeD);
  backdrop&&backdrop.addEventListener('click',closeD);
  window.addEventListener('keydown',e=>{if(e.key==='Escape')closeD()});
  drawer.querySelectorAll('a').forEach(a=>a.addEventListener('click',closeD));
})();
</script>

<!-- SCRIPT LOGIN DEMO -->
<script>
/**
 * "Database" demo in memoria
 */
const DEMO_USERS = {
  landlord: [
    { id:'l1', role:'landlord', name:'Mario Rossi', email:'mario.rossi@rentpay.demo', iban:'IT60X0542811101000000123456', props:3 },
    { id:'l2', role:'landlord', name:'Sara Verdi',  email:'sara.verdi@rentpay.demo',  iban:'IT85U0300203280764839234567', props:1 }
  ],
  tenant: [
    { id:'t1', role:'tenant', name:'Luca Bianchi',  email:'luca.bianchi@rentpay.demo',  address:'Via Roma 12, Milano',  rent:850 },
    { id:'t2', role:'tenant', name:'Giulia Neri',   email:'giulia.neri@rentpay.demo',   address:'Via Po 8, Torino',     rent:720 }
  ]
};

const state = { role:'landlord', selectedId:null };

const accountSelect = document.getElementById('accountSelect');
const fldName = document.getElementById('fldName');
const fldEmail = document.getElementById('fldEmail');
const fldExtra1 = document.getElementById('fldExtra1');
const fldExtra2 = document.getElementById('fldExtra2');
const lblExtra1 = document.getElementById('lblExtra1');
const lblExtra2 = document.getElementById('lblExtra2');
const btnLogin = document.getElementById('btnLogin');
const formTitle = document.getElementById('formTitle');

/** Popola la tendina in base al ruolo */
function populate(role){
  state.role = role;
  formTitle.textContent = (role==='landlord' ? 'Proprietario ‚Äî profili disponibili' : 'Inquilino ‚Äî profili disponibili');

  accountSelect.innerHTML = '';
  DEMO_USERS[role].forEach(u=>{
    const opt = document.createElement('option');
    opt.value = u.id;
    opt.textContent = `${u.name} ‚Äî ${u.email}`;
    accountSelect.appendChild(opt);
  });
  state.selectedId = DEMO_USERS[role][0]?.id || null;
  accountSelect.value = state.selectedId;
  fillDetails();
}

/** Riempie i campi con i dati del profilo selezionato */
function fillDetails(){
  const list = DEMO_USERS[state.role] || [];
  const user = list.find(u=>u.id===state.selectedId);
  if(!user){ fldName.value=fldEmail.value=fldExtra1.value=fldExtra2.value=''; return; }

  fldName.value = user.name;
  fldEmail.value = user.email;

  if(state.role==='landlord'){
    lblExtra1.firstChild.textContent = 'IBAN (accredito)';
    lblExtra2.firstChild.textContent = 'Immobili gestiti';
    fldExtra1.value = user.iban || '';
    fldExtra2.value = String(user.props ?? '');
  }else{
    lblExtra1.firstChild.textContent = 'Indirizzo immobile';
    lblExtra2.firstChild.textContent = 'Canone mensile (‚Ç¨)';
    fldExtra1.value = user.address || '';
    fldExtra2.value = user.rent!=null ? new Intl.NumberFormat('it-IT').format(user.rent) : '';
  }
}

/** Gestione UI tabs */
document.querySelectorAll('.tab-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    populate(btn.dataset.tab);
  });
});

/** Cambio selezione profilo */
accountSelect.addEventListener('change', ()=>{
  state.selectedId = accountSelect.value;
  fillDetails();
});

/** Login demo ‚Üí salva su localStorage e reindirizza */
btnLogin.addEventListener('click', ()=>{
  const list = DEMO_USERS[state.role] || [];
  const user = list.find(u=>u.id===state.selectedId);
  if(!user) return;

  // Salva utente corrente per le dashboard
  localStorage.setItem('rpCurrentUser', JSON.stringify(user));

  // Vai alla dashboard corretta
  if(state.role==='landlord'){
    window.location.href = './dashboard-prop.html';
  }else{
    window.location.href = './dashboard-inq.html';
  }
});

// init
populate('landlord');
</script>
  <script>
const demo = {
  proprietario: [
    {name:'Sara Verdi', email:'sara.verdi@rentpay.demo', iban:'IT85U0300203280764839234567', units:1},
    {name:'Marco Neri', email:'marco.neri@rentpay.demo', iban:'IT60X0542811101000000123456', units:3}
  ],
  inquilino: [
    {name:'Luca Bianchi', email:'luca.bianchi@rentpay.demo', card:'Visa **** 4242', rent:'‚Ç¨ 750/mese'},
    {name:'Giulia Neri', email:'giulia.neri@rentpay.demo', card:'Mastercard **** 9911', rent:'‚Ç¨ 720/mese'}
  ]
};

let ruolo = 'proprietario';
const sel   = document.getElementById('profileSel');
const name  = document.getElementById('name');
const email = document.getElementById('email');
const extra1= document.getElementById('extra1');
const extra2= document.getElementById('extra2');
const lbl1  = document.getElementById('lblExtra1');
const lbl2  = document.getElementById('lblExtra2');

function fillOptions(){
  sel.innerHTML='';
  (demo[ruolo]).forEach((p,i)=>{
    const opt=document.createElement('option');
    opt.value=i;
    opt.textContent = ruolo==='proprietario'
      ? `${p.name} ‚Äî ${p.email}`
      : `${p.name} ‚Äî ${p.email}`;
    sel.appendChild(opt);
  });
  sel.selectedIndex=0;
  applyProfile();
}

function applyProfile(){
  const p = demo[ruolo][sel.value||0];
  name.value  = p.name;
  email.value = p.email;
  if(ruolo==='proprietario'){
    lbl1.textContent='IBAN (accredito)';
    lbl2.textContent='Immobili gestiti';
    extra1.value = p.iban || '';
    extra2.value = p.units ?? '';
  }else{
    lbl1.textContent='Metodo pagamento';
    lbl2.textContent='Canone';
    extra1.value = p.card || '';
    extra2.value = p.rent || '';
  }
}

document.getElementById('btnProp').onclick = e=>{
  document.getElementById('btnProp').classList.add('active');
  document.getElementById('btnInq').classList.remove('active');
  ruolo='proprietario'; fillOptions();
};
document.getElementById('btnInq').onclick = e=>{
  document.getElementById('btnInq').classList.add('active');
  document.getElementById('btnProp').classList.remove('active');
  ruolo='inquilino'; fillOptions();
};
sel.onchange = applyProfile;

// ‚ÄúLogin‚Äù ‚Üí vai alla dashboard corretta con querystring (solo demo)
document.getElementById('btnLogin').onclick = ()=>{
  const i = sel.value||0;
  const target = ruolo==='proprietario' ? 'dashboard-prop.html' : 'dashboard-inq.html';
  window.location.href = `${target}?demo=${encodeURIComponent(ruolo)}&i=${i}`;
};

// init
fillOptions();
</script>
</body>
</html>
